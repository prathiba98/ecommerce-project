# E-Commerce Revenue Leakage & Funnel Analytics
This project analyzes an e-commerce platformâ€™s customer journey and payment system to identify conversion drop-offs, payment failures, retry effectiveness, and revenue leakage.

The goal is to answer real business questions:

1.Where are customers dropping off?

2.Why are payments failing?

3.How much revenue is being lost?

4.What actions can reduce revenue leakage?

All business logic is handled in SQL, and Power BI is used purely for visualization, following real-world analytics best practices.

## Project architecture
Raw Tables (SQL)
   |
Analytical Queries / Views (SQL)
   |
Power BI Dashboard (Visualization Only)

## Data sources(tables)
product_views

cart_items

orders

payments

payment_attempts

users

sessions

The above tables were created from the respective csv files which were generated by python codes using pandas and numpy.


## step 1
The above csv files were loaded into sql as tables using import data function. The data in the tables were cleaned using select,count(*),distinct,case etc queries.
example query:

SELECT payment_id, payment_status, failure_reason
FROM payments
WHERE payment_status = 'success'
  AND failure_reason IS NOT NULL;


## step 2
Using the above tables kpi's like gross potential revenue,realised revenue,revenue lost due to payment failure,revenue recovered via payment retries and various types of leakages were calculated using sql queries.

example of query and it's output:
WITH recovered_payments AS (
    SELECT DISTINCT payment_id
    FROM payment_attempts
    WHERE attempt_status = 'success'
      AND attempt_number > 1
)

SELECT
    ROUND(SUM(p.amount), 2) AS recovered_revenue
FROM payments p
JOIN recovered_payments r
    ON p.payment_id = r.payment_id

![Image](https://github.com/user-attachments/assets/e20c874f-823c-4374-b89b-368975ad4224)


## step 3
Further customer funnel analysis was done using cte and joins in sql.Important measures like funnel counts, funnel by traffic source, by device type, funnel conversion rates were calculated.

![Image](https://github.com/user-attachments/assets/2ecc9a53-41aa-402c-afda-d99a2e398de2)

![Image](https://github.com/user-attachments/assets/7df3c45e-1e8a-4903-951f-f2972039f76b)

![Image](https://github.com/user-attachments/assets/b0a107b5-26e2-4378-a0fd-a377b4108dfd)

![Image](https://github.com/user-attachments/assets/e00b961f-b176-491a-8120-5a848779fdea)

## step 4
Payment failure and retry analysis was done by using group by,order by, case statements in sql.Payment failure rate by bank,by payment method,failure reason distribution etc were calculated.


example:
WITH recovered_payments AS (
    SELECT DISTINCT
        pa.payment_id
    FROM payment_attempts pa
    WHERE pa.attempt_status = 'success'
      AND pa.attempt_number > 1
)

SELECT
    ROUND(SUM(p.amount), 2) AS revenue_recovered
FROM payments p
JOIN recovered_payments rp
    ON p.payment_id = rp.payment_id;

![Image](https://github.com/user-attachments/assets/d610e1cd-b1cd-48fb-89f9-f8d44c440a45)

## step 5
Views like recovery by method,retry attempts summary etc were created to visualise the data on powerbi.

## step 6

A 4 page report was created using the above views which was loaded into powerbi.

 Key insights from the report:

1.Analyzed the customer funnel.

2.Identified major conversion drop-offs.

3.Investigated reasons for payment failures.

4.Evaluated the effectiveness of retry strategies.

5.Quantified and segmented revenue loss.

6.Measured revenue recovery through retries.

## snap of powerbi report

![Image](https://github.com/user-attachments/assets/72fd5b06-91cc-4797-9968-d860b466403c)

![Image](https://github.com/user-attachments/assets/383a662f-ebeb-4436-96d7-73caa19f2ada)

![Image](https://github.com/user-attachments/assets/4303fd74-9c3e-418b-b5f8-575a24711e72)

![Image](https://github.com/user-attachments/assets/60f914a0-3296-423b-80ea-fcd81850107e)
